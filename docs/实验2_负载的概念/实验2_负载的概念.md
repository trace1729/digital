# 实验2负载的概念
“智深相了一相，走到树前，把直裰脱了，用右手向下，把身倒缴着，却把左手拔住上截，把腰只一趁，将那株绿杨树带根拔起。”

——《水浒传》，施耐庵

负载，是一个电路仿真以及电路实际工作中非常重要的概念。不过在我的印象中，理论课程中似乎并没有讲过，这导致我在做实验以及实际电路调试的时候吃了很多亏，所以这里专门增加这一章节，来讲解一下负载的概念。
# 2.1.何为负载
理论上来说，任何一个实际工作的电路，总是需要驱动负载的。比如电机的负载就是驱动的齿轮、给手机充电时的负载就是手机电池。
我们来回顾一下我们上一个实验的仿真电路图，以及我们之前做的很多仿真电路图。很多时候，我们其实输出端什么都没有连接（例如这里输出直接为一根导线命名为y）。这相当于这个电路的输出端y根本没有形成任何的回路（不信的话，你可以把电路完整的画出来看看）！因此这个电路中实际根本不存在电流（或者说电流非常小）。
![](./图片/图片%201.png)

显然，这样的仿真和实际情况不相符，因为实际电路中，我们肯定要驱动某一个输出。比如给手机充电，那么电池就是输出。而在充电的过程中，实际上是有很大的电流流过电路的，这个能量最终流向了负载中。
所以，我们说电路负载就是：连接在电路中（一般为输出端）消耗电能的电子元件。
## 2.2.大负载？小负载？
有了输出负载的概念，我想问大家一个问题：大电阻是大负载还是小负载？大电容呢？
我相信很多同学会想当然的说：大电阻和大电容都是大负载。可惜，你犯了和我当年一样的错误（你的直觉又一次骗了你）。下面且听我娓娓道来。
我们对输出负载的定义是通过输出的驱动电流大小来决定的。OK，那么我们再来看一下，假设输出电压10V，一个阻值为10k的大电阻，那么通过它的电流就是10V / 10k = 1mA，而一个阻值为10的小电阻，那么通过它的电流就是10V / 10 = 1A，结果显而易见，小电阻所需的驱动电流更大，因此：小电阻为大负载，大电阻为小负载！
电容的情况则比较符合直觉，大电容表示大负载，小电容表示小负载。我们可以直观的定性理解：大电容“容量”更大，所以需要更大的电流（更多的电子数量）才能充满。
或者我们也可以从信号与系统的角度理解：电容的阻抗表达式为：1/jwC，电容容值越大阻抗越小，因此流过的电流就越大（方波电流通过傅里叶变换转化为各谐波交流电流）。
## 2.3.测试电路的驱动负载能力
### 2.3.1.测试反相器驱动能力
我们在实验1的基础上，在输出端增加一个非常小的0.1pF的电容作为输出负载，然后观察反相器随时间变化的输出结果，如下图所示。

![](./图片/图片%203.png)

图 1 测试电路图

![](./图片/图片%202.png)

图 2 测试输出结果

结果非常的Amazing啊！反相器输出的方波与原来相比变得“圆滑”了许多，我想学过电路分析的同学一定会大喊一声：RC电路！是的，其实电容作为负载的本质就是输出端构成了一个RC电路（R可以理解为：MOS管的导通等效电阻以及其他的寄生电阻经过戴维南等效后的等效电阻）。因此，RC把输出结果变得“圆滑”了，实际上就是在给电容充电了。
0.1pF的电容非常非常小，我们不妨把负载电容扩大10倍，改为1pF的负载，再次输出结果，你会发现此时的输出已经变得“面目全非”，几乎变成了三角波！这说明我们的反相器驱动负载能力很差！这样的反相器在实际芯片中会出现大问题！

![](./图片/图片%205.png)

图 3 1pF负载测试电路图

![](./图片/图片%204.png)

图 4 测试输出结果

聪明的你，一定会问：“我们该如何增加电路的驱动能力呢？”下面两节我们就会为大家提供两种可的思路，欲知后事如何，请听下回分解！
### 2.3.2.补充知识：数字集成电路的标准测试平台
在学术界和工业界的测试中，我们经常使用4个该工艺下最小尺寸的反相器作为测试输出负载。例如，假设我们的芯片使用中芯国际的180nm工艺设计，那么我们的测试输出负载就是：使用180nm晶体管（W/L=1）（实验3讲解）搭建的4个反相器，反相器的输出连接到GND。
而输入我们也并非直接连接到电源以及信号，而是由电源以及信号经过2个该工艺下最小尺寸的反相器后（聪明的你，思考一下为什么是2个反相器）作为测试输入。最终的测试平台如下：

![](./图片/图片%206.png)

图 5 数字集成电路的标准测试平台
## 2.4.数字集成电路中的负载
在数字集成电路中，一般来说，一个门的输出负载主要为输出所连接的门的输入寄生电容（栅电容）。比如在下面的电路中，第一个非门的负载就是与门和或门的输入寄生电容。显然，一个门输出驱动的信号越多，相当于负载越大，甚至有可能发生输出由方波变为三角波的极端情况。

![](./图片/图片%207.png)

我们使用扇出系数表达一个门的驱动能力，即带电路负载的能力。扇出系数指的是对于一个门电路来讲，它能带自己同样类型的门有多少个。具体计算方法请STFW。

## 2.5.动手实验内容
1 自己搭建一个测试平台，测试反相器的驱动能力。